<h1 class="col-12">&nbsp;</h1>
<div class="container">
    <form (submit)="onSubmit($event)" id="customerAccessManagementForm" name="customer-access-management-form" novalidate>
        <div class="form-group col-3">
            <input autocomplete="off" class="form-control" placeholder="Find User" [(ngModel)]="filterStr" (ngModelChange)="onFilter($event)"/>
        </div>
        <div class="form-group col-12">&nbsp;</div>
        <table class="table table-bordered customerAccessTable" cellpadding="5">
            <thead>
                <tr>
                    <th>Company</th>
                    <th>First&nbsp;Name</th>
                    <th>Last&nbsp;Name</th>
                    <th>Email&nbsp;Address</th>
                </tr>
            </thead>
            <template ngFor let-user [ngForOf]="filteredUsers" let-i="index">
                <tr (click)="user.show = !user.show">
                    <td><span class="button -outline -md">
                      <ng-container *ngIf="user.show">-</ng-container>
                      <ng-container *ngIf="!user.show">+</ng-container>
                    </span>&nbsp;{{user.company}}</td>
                    <td>{{user.firstName}}</td>
                    <td>{{user.lastName}}</td>
                    <td>{{user.email}}</td>
                </tr>
                <template ngFor let-fleet [ngForOf]="user.fleet" let-i="idx">
                    <tr [ngClass]="(user.show == true) ? 'open':'close'">
                        <td colspan="1">&nbsp;</td>
                        <td colspan="5">
                            <h4 (click)="fleet.show = !fleet.show" class="fleet-header"><span class="button -outline -md">
                              <ng-container *ngIf="fleet.show">-</ng-container>
                              <ng-container *ngIf="!fleet.show">+</ng-container>
                            </span>&nbsp;&nbsp;{{fleet.name}}</h4>
                            <table class="fleet-table" [ngClass]="(fleet.show == true) ? 'open':'close'" width="100%">
                                <tr align="right">
                                    <td>
                                        <input type="checkbox" [checked]="fleet.checked"/>
                                    </td>
                                    <td><input type="text" class="form-control" placeholder="attribute" value="{{fleet.attribute}}"/></td>
                                    <td><input type="text" class="form-control" placeholder="bol" value="{{fleet.bol}}"/></td>
                                    <td><input type="text" class="form-control" placeholder="state" value="{{fleet.state}}"/></td>
                                    <td>
                                        <span class="button">&#9998;</span>
                                        <button class="button"><small>&#10060;</small></button>
                                    </td>
                                </tr>
                            </table>
                        </td>
                    </tr>
                </template>
            </template>
        </table>
        <div class="form-group col-12 ">&nbsp;</div>
        <div class="form-group col-12 ">
            <button class="button float-right " type="submit ">Add New User</button>
        </div>
    </form>
</div>
